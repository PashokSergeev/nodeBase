<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap"
          rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f4f8;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
        }

        .custom-button {
            transition: all 0.3s ease;
        }

        .custom-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .drag-handle {
            cursor: grab;
        }

        .dragging {
            opacity: 0.5;
            cursor: grabbing;
        }
    </style>
    <style>*, ::before, ::after {
        --tw-border-spacing-x: 0;
        --tw-border-spacing-y: 0;
        --tw-translate-x: 0;
        --tw-translate-y: 0;
        --tw-rotate: 0;
        --tw-skew-x: 0;
        --tw-skew-y: 0;
        --tw-scale-x: 1;
        --tw-scale-y: 1;
        --tw-pan-x: ;
        --tw-pan-y: ;
        --tw-pinch-zoom: ;
        --tw-scroll-snap-strictness: proximity;
        --tw-gradient-from-position: ;
        --tw-gradient-via-position: ;
        --tw-gradient-to-position: ;
        --tw-ordinal: ;
        --tw-slashed-zero: ;
        --tw-numeric-figure: ;
        --tw-numeric-spacing: ;
        --tw-numeric-fraction: ;
        --tw-ring-inset: ;
        --tw-ring-offset-width: 0px;
        --tw-ring-offset-color: #fff;
        --tw-ring-color: rgb(59 130 246 / 0.5);
        --tw-ring-offset-shadow: 0 0 #0000;
        --tw-ring-shadow: 0 0 #0000;
        --tw-shadow: 0 0 #0000;
        --tw-shadow-colored: 0 0 #0000;
        --tw-blur: ;
        --tw-brightness: ;
        --tw-contrast: ;
        --tw-grayscale: ;
        --tw-hue-rotate: ;
        --tw-invert: ;
        --tw-saturate: ;
        --tw-sepia: ;
        --tw-drop-shadow: ;
        --tw-backdrop-blur: ;
        --tw-backdrop-brightness: ;
        --tw-backdrop-contrast: ;
        --tw-backdrop-grayscale: ;
        --tw-backdrop-hue-rotate: ;
        --tw-backdrop-invert: ;
        --tw-backdrop-opacity: ;
        --tw-backdrop-saturate: ;
        --tw-backdrop-sepia: ;
        --tw-contain-size: ;
        --tw-contain-layout: ;
        --tw-contain-paint: ;
        --tw-contain-style:
    }

    ::backdrop {
        --tw-border-spacing-x: 0;
        --tw-border-spacing-y: 0;
        --tw-translate-x: 0;
        --tw-translate-y: 0;
        --tw-rotate: 0;
        --tw-skew-x: 0;
        --tw-skew-y: 0;
        --tw-scale-x: 1;
        --tw-scale-y: 1;
        --tw-pan-x: ;
        --tw-pan-y: ;
        --tw-pinch-zoom: ;
        --tw-scroll-snap-strictness: proximity;
        --tw-gradient-from-position: ;
        --tw-gradient-via-position: ;
        --tw-gradient-to-position: ;
        --tw-ordinal: ;
        --tw-slashed-zero: ;
        --tw-numeric-figure: ;
        --tw-numeric-spacing: ;
        --tw-numeric-fraction: ;
        --tw-ring-inset: ;
        --tw-ring-offset-width: 0px;
        --tw-ring-offset-color: #fff;
        --tw-ring-color: rgb(59 130 246 / 0.5);
        --tw-ring-offset-shadow: 0 0 #0000;
        --tw-ring-shadow: 0 0 #0000;
        --tw-shadow: 0 0 #0000;
        --tw-shadow-colored: 0 0 #0000;
        --tw-blur: ;
        --tw-brightness: ;
        --tw-contrast: ;
        --tw-grayscale: ;
        --tw-hue-rotate: ;
        --tw-invert: ;
        --tw-saturate: ;
        --tw-sepia: ;
        --tw-drop-shadow: ;
        --tw-backdrop-blur: ;
        --tw-backdrop-brightness: ;
        --tw-backdrop-contrast: ;
        --tw-backdrop-grayscale: ;
        --tw-backdrop-hue-rotate: ;
        --tw-backdrop-invert: ;
        --tw-backdrop-opacity: ;
        --tw-backdrop-saturate: ;
        --tw-backdrop-sepia: ;
        --tw-contain-size: ;
        --tw-contain-layout: ;
        --tw-contain-paint: ;
        --tw-contain-style:
    }

    /* ! tailwindcss v3.4.16 | MIT License | https://tailwindcss.com */
    *, ::after, ::before {
        box-sizing: border-box;
        border-width: 0;
        border-style: solid;
        border-color: #e5e7eb
    }

    ::after, ::before {
        --tw-content: ''
    }

    :host, html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        -moz-tab-size: 4;
        tab-size: 4;
        font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        font-feature-settings: normal;
        font-variation-settings: normal;
        -webkit-tap-highlight-color: transparent
    }

    body {
        margin: 0;
        line-height: inherit
    }

    hr {
        height: 0;
        color: inherit;
        border-top-width: 1px
    }

    abbr:where([title]) {
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted
    }

    h1, h2, h3, h4, h5, h6 {
        font-size: inherit;
        font-weight: inherit
    }

    a {
        color: inherit;
        text-decoration: inherit
    }

    b, strong {
        font-weight: bolder
    }

    code, kbd, pre, samp {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-feature-settings: normal;
        font-variation-settings: normal;
        font-size: 1em
    }

    small {
        font-size: 80%
    }

    sub, sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline
    }

    sub {
        bottom: -.25em
    }

    sup {
        top: -.5em
    }

    table {
        text-indent: 0;
        border-color: inherit;
        border-collapse: collapse
    }

    button, input, optgroup, select, textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-variation-settings: inherit;
        font-size: 100%;
        font-weight: inherit;
        line-height: inherit;
        letter-spacing: inherit;
        color: inherit;
        margin: 0;
        padding: 0
    }

    button, select {
        text-transform: none
    }

    button, input:where([type=button]), input:where([type=reset]), input:where([type=submit]) {
        -webkit-appearance: button;
        background-color: transparent;
        background-image: none
    }

    :-moz-focusring {
        outline: auto
    }

    :-moz-ui-invalid {
        box-shadow: none
    }

    progress {
        vertical-align: baseline
    }

    ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
        height: auto
    }

    [type=search] {
        -webkit-appearance: textfield;
        outline-offset: -2px
    }

    ::-webkit-search-decoration {
        -webkit-appearance: none
    }

    ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit
    }

    summary {
        display: list-item
    }

    blockquote, dd, dl, figure, h1, h2, h3, h4, h5, h6, hr, p, pre {
        margin: 0
    }

    fieldset {
        margin: 0;
        padding: 0
    }

    legend {
        padding: 0
    }

    menu, ol, ul {
        list-style: none;
        margin: 0;
        padding: 0
    }

    dialog {
        padding: 0
    }

    textarea {
        resize: vertical
    }

    input::placeholder, textarea::placeholder {
        opacity: 1;
        color: #9ca3af
    }

    [role=button], button {
        cursor: pointer
    }

    :disabled {
        cursor: default
    }

    audio, canvas, embed, iframe, img, object, svg, video {
        display: block;
        vertical-align: middle
    }

    img, video {
        max-width: 100%;
        height: auto
    }

    [hidden]:where(:not([hidden=until-found])) {
        display: none
    }

    .container {
        width: 100%
    }

    @media (min-width: 640px) {
        .container {
            max-width: 640px
        }
    }

    @media (min-width: 768px) {
        .container {
            max-width: 768px
        }
    }

    @media (min-width: 1024px) {
        .container {
            max-width: 1024px
        }
    }

    @media (min-width: 1280px) {
        .container {
            max-width: 1280px
        }
    }

    @media (min-width: 1536px) {
        .container {
            max-width: 1536px
        }
    }

    .fixed {
        position: fixed
    }

    .inset-0 {
        inset: 0px
    }

    .bottom-4 {
        bottom: 1rem
    }

    .right-4 {
        right: 1rem
    }

    .z-50 {
        z-index: 50
    }

    .mx-4 {
        margin-left: 1rem;
        margin-right: 1rem
    }

    .mx-auto {
        margin-left: auto;
        margin-right: auto
    }

    .mb-1 {
        margin-bottom: 0.25rem
    }

    .mb-4 {
        margin-bottom: 1rem
    }

    .mb-6 {
        margin-bottom: 1.5rem
    }

    .mb-8 {
        margin-bottom: 2rem
    }

    .mt-1 {
        margin-top: 0.25rem
    }

    .ml-4 {
        margin-left: 1rem
    }

    .mr-3 {
        margin-right: 0.75rem
    }

    .block {
        display: block
    }

    .flex {
        display: flex
    }

    .grid {
        display: grid
    }

    .hidden {
        display: none
    }

    .min-h-screen {
        min-height: 100vh
    }

    .w-full {
        width: 100%
    }

    .max-w-md {
        max-width: 28rem
    }

    .flex-grow {
        flex-grow: 1
    }

    .translate-y-20 {
        --tw-translate-y: 5rem;
        transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
    }

    .transform {
        transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
    }

    .grid-cols-1 {
        grid-template-columns:repeat(1, minmax(0, 1fr))
    }

    .items-center {
        align-items: center
    }

    .justify-end {
        justify-content: flex-end
    }

    .justify-center {
        justify-content: center
    }

    .justify-between {
        justify-content: space-between
    }

    .gap-4 {
        gap: 1rem
    }

    .space-x-2 > :not([hidden]) ~ :not([hidden]) {
        --tw-space-x-reverse: 0;
        margin-right: calc(0.5rem * var(--tw-space-x-reverse));
        margin-left: calc(0.5rem * calc(1 - var(--tw-space-x-reverse)))
    }

    .space-x-4 > :not([hidden]) ~ :not([hidden]) {
        --tw-space-x-reverse: 0;
        margin-right: calc(1rem * var(--tw-space-x-reverse));
        margin-left: calc(1rem * calc(1 - var(--tw-space-x-reverse)))
    }

    .space-y-3 > :not([hidden]) ~ :not([hidden]) {
        --tw-space-y-reverse: 0;
        margin-top: calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));
        margin-bottom: calc(0.75rem * var(--tw-space-y-reverse))
    }

    .space-y-4 > :not([hidden]) ~ :not([hidden]) {
        --tw-space-y-reverse: 0;
        margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));
        margin-bottom: calc(1rem * var(--tw-space-y-reverse))
    }

    .truncate {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap
    }

    .rounded-lg {
        border-radius: 0.5rem
    }

    .rounded-xl {
        border-radius: 0.75rem
    }

    .border {
        border-width: 1px
    }

    .border-gray-300 {
        --tw-border-opacity: 1;
        border-color: rgb(209 213 219 / var(--tw-border-opacity, 1))
    }

    .border-gray-200 {
        --tw-border-opacity: 1;
        border-color: rgb(229 231 235 / var(--tw-border-opacity, 1))
    }

    .bg-black {
        --tw-bg-opacity: 1;
        background-color: rgb(0 0 0 / var(--tw-bg-opacity, 1))
    }

    .bg-gray-200 {
        --tw-bg-opacity: 1;
        background-color: rgb(229 231 235 / var(--tw-bg-opacity, 1))
    }

    .bg-green-500 {
        --tw-bg-opacity: 1;
        background-color: rgb(34 197 94 / var(--tw-bg-opacity, 1))
    }

    .bg-purple-600 {
        --tw-bg-opacity: 1;
        background-color: rgb(147 51 234 / var(--tw-bg-opacity, 1))
    }

    .bg-purple-800 {
        --tw-bg-opacity: 1;
        background-color: rgb(107 33 168 / var(--tw-bg-opacity, 1))
    }

    .bg-red-500 {
        --tw-bg-opacity: 1;
        background-color: rgb(239 68 68 / var(--tw-bg-opacity, 1))
    }

    .bg-white {
        --tw-bg-opacity: 1;
        background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1))
    }

    .bg-blue-500 {
        --tw-bg-opacity: 1;
        background-color: rgb(59 130 246 / var(--tw-bg-opacity, 1))
    }

    .bg-gray-50 {
        --tw-bg-opacity: 1;
        background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1))
    }

    .bg-purple-500 {
        --tw-bg-opacity: 1;
        background-color: rgb(168 85 247 / var(--tw-bg-opacity, 1))
    }

    .bg-yellow-500 {
        --tw-bg-opacity: 1;
        background-color: rgb(234 179 8 / var(--tw-bg-opacity, 1))
    }

    .bg-purple-200 {
        --tw-bg-opacity: 1;
        background-color: rgb(233 213 255 / var(--tw-bg-opacity, 1))
    }

    .bg-opacity-50 {
        --tw-bg-opacity: 0.5
    }

    .bg-gradient-to-r {
        background-image: linear-gradient(to right, var(--tw-gradient-stops))
    }

    .from-purple-600 {
        --tw-gradient-from: #9333ea var(--tw-gradient-from-position);
        --tw-gradient-to: rgb(147 51 234 / 0) var(--tw-gradient-to-position);
        --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)
    }

    .to-indigo-600 {
        --tw-gradient-to: #4f46e5 var(--tw-gradient-to-position)
    }

    .p-8 {
        padding: 2rem
    }

    .p-2 {
        padding: 0.5rem
    }

    .p-3 {
        padding: 0.75rem
    }

    .px-3 {
        padding-left: 0.75rem;
        padding-right: 0.75rem
    }

    .px-4 {
        padding-left: 1rem;
        padding-right: 1rem
    }

    .px-6 {
        padding-left: 1.5rem;
        padding-right: 1.5rem
    }

    .py-1 {
        padding-top: 0.25rem;
        padding-bottom: 0.25rem
    }

    .py-2 {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem
    }

    .py-3 {
        padding-top: 0.75rem;
        padding-bottom: 0.75rem
    }

    .py-6 {
        padding-top: 1.5rem;
        padding-bottom: 1.5rem
    }

    .py-8 {
        padding-top: 2rem;
        padding-bottom: 2rem
    }

    .py-4 {
        padding-top: 1rem;
        padding-bottom: 1rem
    }

    .text-center {
        text-align: center
    }

    .text-2xl {
        font-size: 1.5rem;
        line-height: 2rem
    }

    .text-sm {
        font-size: 0.875rem;
        line-height: 1.25rem
    }

    .text-xl {
        font-size: 1.25rem;
        line-height: 1.75rem
    }

    .text-xs {
        font-size: 0.75rem;
        line-height: 1rem
    }

    .font-bold {
        font-weight: 700
    }

    .font-medium {
        font-weight: 500
    }

    .font-semibold {
        font-weight: 600
    }

    .text-gray-500 {
        --tw-text-opacity: 1;
        color: rgb(107 114 128 / var(--tw-text-opacity, 1))
    }

    .text-gray-600 {
        --tw-text-opacity: 1;
        color: rgb(75 85 99 / var(--tw-text-opacity, 1))
    }

    .text-gray-700 {
        --tw-text-opacity: 1;
        color: rgb(55 65 81 / var(--tw-text-opacity, 1))
    }

    .text-gray-800 {
        --tw-text-opacity: 1;
        color: rgb(31 41 55 / var(--tw-text-opacity, 1))
    }

    .text-purple-600 {
        --tw-text-opacity: 1;
        color: rgb(147 51 234 / var(--tw-text-opacity, 1))
    }

    .text-white {
        --tw-text-opacity: 1;
        color: rgb(255 255 255 / var(--tw-text-opacity, 1))
    }

    .text-gray-400 {
        --tw-text-opacity: 1;
        color: rgb(156 163 175 / var(--tw-text-opacity, 1))
    }

    .text-purple-800 {
        --tw-text-opacity: 1;
        color: rgb(107 33 168 / var(--tw-text-opacity, 1))
    }

    .opacity-0 {
        opacity: 0
    }

    .shadow-lg {
        --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
        box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
    }

    .shadow-md {
        --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);
        box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
    }

    .shadow-xl {
        --tw-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        --tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);
        box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
    }

    .outline-none {
        outline: 2px solid transparent;
        outline-offset: 2px
    }

    .transition-all {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms
    }

    .transition-colors {
        transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;
        transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
        transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms
    }

    .duration-300 {
        transition-duration: 300ms
    }

    .hover\:bg-gray-300:hover {
        --tw-bg-opacity: 1;
        background-color: rgb(209 213 219 / var(--tw-bg-opacity, 1))
    }

    .hover\:bg-purple-100:hover {
        --tw-bg-opacity: 1;
        background-color: rgb(243 232 255 / var(--tw-bg-opacity, 1))
    }

    .hover\:bg-purple-700:hover {
        --tw-bg-opacity: 1;
        background-color: rgb(126 34 206 / var(--tw-bg-opacity, 1))
    }

    .hover\:bg-red-600:hover {
        --tw-bg-opacity: 1;
        background-color: rgb(220 38 38 / var(--tw-bg-opacity, 1))
    }

    .hover\:bg-blue-600:hover {
        --tw-bg-opacity: 1;
        background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1))
    }

    .hover\:bg-green-600:hover {
        --tw-bg-opacity: 1;
        background-color: rgb(22 163 74 / var(--tw-bg-opacity, 1))
    }

    .hover\:bg-purple-600:hover {
        --tw-bg-opacity: 1;
        background-color: rgb(147 51 234 / var(--tw-bg-opacity, 1))
    }

    .hover\:text-purple-600:hover {
        --tw-text-opacity: 1;
        color: rgb(147 51 234 / var(--tw-text-opacity, 1))
    }

    .focus\:border-purple-500:focus {
        --tw-border-opacity: 1;
        border-color: rgb(168 85 247 / var(--tw-border-opacity, 1))
    }

    .focus\:ring-2:focus {
        --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
        --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
        box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)
    }

    .focus\:ring-purple-500:focus {
        --tw-ring-opacity: 1;
        --tw-ring-color: rgb(168 85 247 / var(--tw-ring-opacity, 1))
    }

    @media (min-width: 768px) {
        .md\:grid-cols-2 {
            grid-template-columns:repeat(2, minmax(0, 1fr))
        }
    }</style>
</head>
<body>
<div class="min-h-screen">
    <header class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6 flex justify-between items-center">
            <h1 class="text-2xl font-bold">Главная страница</h1>
            <div class="flex items-center space-x-4">
                <div class="text-sm bg-purple-800 bg-opacity-50 px-3 py-1 rounded-lg">
                    <kbd class="font-semibold">Shift+Ctrl+F</kbd> чтобы войти в админ-панель
                </div>
                <button id="mode-toggle"
                        class="px-4 py-2 rounded-lg font-medium hover:bg-purple-100 transition-colors bg-white text-purple-600">
                    Админ-панель
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- View Mode -->
        <div id="view-mode" class="bg-white rounded-xl shadow-md p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">Доступные приложения</h2>
            <div id="button-container" class="button-grid"><a href="https://google.com" target="_blank"
                                                              class="custom-button bg-blue-500 hover:bg-blue-600 text-white px-6 py-4 rounded-lg font-medium text-center shadow-md flex items-center justify-center">Google</a>
            </div>
        </div>

        <!-- Admin Mode (hidden by default) -->
        <div id="admin-mode" class="hidden">
            <div class="bg-white rounded-xl shadow-md p-8 mb-8">
                <h2 class="text-2xl font-semibold mb-6 text-gray-800">Добавить новую кнопку</h2>
                <form id="add-button-form" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="button-name"
                                   class="block text-sm font-medium text-gray-700 mb-1">Название</label>
                            <input type="text" id="button-name"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-colors"
                                   placeholder="Введите название кнопки" required="">
                        </div>
                        <div>
                            <label for="button-url" class="block text-sm font-medium text-gray-700 mb-1">URL или Путь
                                кнопки</label>
                            <input type="text" id="button-url"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-colors"
                                   placeholder="https://example.com или index" required="">
                            <p class="text-xs text-gray-500 mt-1">Введите полный URL (https://...) или просто путь
                                (index, about и т. д.)</p>
                        </div>
                    </div>
                    <div>
                        <label for="button-color" class="block text-sm font-medium text-gray-700 mb-1">Цвет
                            кнопки</label>
                        <select id="button-color"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-colors">
                            <option value="bg-blue-500 hover:bg-blue-600">Голубой</option>
                            <option value="bg-green-500 hover:bg-green-600">Зеленый</option>
                            <option value="bg-purple-500 hover:bg-purple-600" selected="">Фиолетовый</option>
                            <option value="bg-red-500 hover:bg-red-600">Красный</option>
                            <option value="bg-yellow-500 hover:bg-yellow-600">Желтый</option>
                            <option value="bg-pink-500 hover:bg-pink-600">Розовый</option>
                            <option value="bg-indigo-500 hover:bg-indigo-600">Индиго</option>
                            <option value="bg-teal-500 hover:bg-teal-600">Бирюзовый</option>
                        </select>
                    </div>
                    <div class="flex justify-end">
                        <button type="submit"
                                class="bg-purple-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors">
                            Добавить кнопку
                        </button>
                    </div>
                </form>
            </div>

            <div class="bg-white rounded-xl shadow-md p-8">
                <h2 class="text-2xl font-semibold mb-6 text-gray-800">Управление Кнопками</h2>
                <p class="text-gray-600 mb-4">Перетаскивайте кнопки, чтобы изменить их порядок. Нажмите на кнопку, чтобы
                    отредактировать или удалить ее.</p>
                <div id="admin-button-container" class="space-y-3">
                    <div class="flex items-center bg-gray-50 p-3 rounded-lg border border-gray-200" data-id="1"
                         draggable="true">
                        <div class="drag-handle mr-3 text-gray-400">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <circle cx="8" cy="8" r="1"></circle>
                                <circle cx="8" cy="16" r="1"></circle>
                                <circle cx="16" cy="8" r="1"></circle>
                                <circle cx="16" cy="16" r="1"></circle>
                            </svg>
                        </div>
                        <div class="flex-grow">
                            <div class="font-medium">Google</div>
                            <div class="text-sm text-gray-500 truncate">https://google.com</div>
                        </div>
                        <div class="ml-4">
                            <button class="edit-button p-2 text-gray-600 hover:text-purple-600 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Button Modal -->
        <div id="edit-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-xl p-8 max-w-md w-full mx-4">
                <h3 class="text-xl font-semibold mb-4 text-gray-800">Изменить кнопку</h3>
                <form id="edit-button-form" class="space-y-4">
                    <input type="hidden" id="edit-button-id">
                    <div>
                        <label for="edit-button-name"
                               class="block text-sm font-medium text-gray-700 mb-1">Название</label>
                        <input type="text" id="edit-button-name"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-colors"
                               required="">
                    </div>
                    <div>
                        <label for="edit-button-url" class="block text-sm font-medium text-gray-700 mb-1">URL-адрес или
                            путь к кнопке</label>
                        <input type="text" id="edit-button-url"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-colors"
                               required="">
                        <p class="text-xs text-gray-500 mt-1">Введите полный URL (https://...) или просто путь (index,
                            about и т. д.)</p>
                    </div>
                    <div>
                        <label for="edit-button-color" class="block text-sm font-medium text-gray-700 mb-1">Цвет
                            кнопки</label>
                        <select id="edit-button-color"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-colors">
                            <option value="bg-blue-500 hover:bg-blue-600">Голубой</option>
                            <option value="bg-green-500 hover:bg-green-600">Зеленый</option>
                            <option value="bg-purple-500 hover:bg-purple-600" selected="">Фиолетовый</option>
                            <option value="bg-red-500 hover:bg-red-600">Красный</option>
                            <option value="bg-yellow-500 hover:bg-yellow-600">Желтый</option>
                            <option value="bg-pink-500 hover:bg-pink-600">Розовый</option>
                            <option value="bg-indigo-500 hover:bg-indigo-600">Индиго</option>
                            <option value="bg-teal-500 hover:bg-teal-600">Бирюзовый</option>
                        </select>
                    </div>
                    <div class="flex justify-between">
                        <button type="button" id="delete-button"
                                class="bg-red-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-600 transition-colors">
                            Удалить
                        </button>
                        <div class="space-x-2">
                            <button type="button" id="cancel-edit"
                                    class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-medium hover:bg-gray-300 transition-colors">
                                Выйти
                            </button>
                            <button type="submit"
                                    class="bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors">
                                Сохранить изменения
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Notification Toast -->
        <div id="notification"
             class="fixed bottom-4 right-4 bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 z-50 translate-y-20 opacity-0">
            <span id="notification-message">Использование выборочных данных (API недоступно)</span>
        </div>
    </main>
</div>

<script>
    // State management
    let currentData = [];
    let isAdminMode = false;
    let draggedItem = null;

    // DOM Elements
    const modeToggle = document.getElementById('mode-toggle');
    const viewMode = document.getElementById('view-mode');
    const adminMode = document.getElementById('admin-mode');
    const buttonContainer = document.getElementById('button-container');
    const adminButtonContainer = document.getElementById('admin-button-container');
    const addButtonForm = document.getElementById('add-button-form');
    const editModal = document.getElementById('edit-modal');
    const editButtonForm = document.getElementById('edit-button-form');
    const cancelEdit = document.getElementById('cancel-edit');
    const deleteButton = document.getElementById('delete-button');
    const notification = document.getElementById('notification');

    // Initialize with sample data
    const sampleData = [
        {id: 1, name: 'Google', url: 'https://google.com', color: 'bg-blue-500 hover:bg-blue-600'},
        {id: 2, name: 'YouTube', url: 'https://youtube.com', color: 'bg-red-500 hover:bg-red-600'},
        {id: 3, name: 'GitHub', url: 'https://github.com', color: 'bg-purple-500 hover:bg-purple-600'},
        {id: 4, name: 'Home Page', url: 'index', color: 'bg-green-500 hover:bg-green-600'}
    ];

    // Format URL properly
    function formatUrl(url) {
        if (!url) return '#';

        // Check if it's a full URL
        if (url.startsWith('http://') || url.startsWith('https://')) {
            return url;
        }

        // Otherwise, treat as a relative path
        return url;
    }

    // Load data from API or use sample data
    async function loadData() {
        try {
            const res = await fetch('/api/buttons');
            if (res.ok) {
                const data = await res.json();
                // Ensure data is an array
                currentData = Array.isArray(data) ? data : [];
                if (!Array.isArray(data)) {
                    showNotification('Проблема с форматом ответа API — использование примеров данных', 'bg-yellow-500');
                    currentData = sampleData;
                }
            } else {
                // Use sample data if API fails
                currentData = sampleData;
                showNotification('Использование выборочных данных (API недоступен)', 'bg-yellow-500');
            }
        } catch (error) {
            console.error('Error loading data:', error);
            currentData = sampleData;
            showNotification('Использование выборочных данных (API недоступно)', 'bg-yellow-500');
        }
        renderButtons();
    }

    // Save data to API
    async function saveData() {
        try {
            await fetch('/api/buttons', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(currentData)
            });
            showNotification('Изменения успешно сохранены!');
        } catch (error) {
            console.error('Error saving data:', error);
            showNotification('Изменения сохранены локально (API недоступно)', 'bg-yellow-500');
        }
    }

    // Render buttons in view mode
    function renderButtons() {
        buttonContainer.innerHTML = '';
        adminButtonContainer.innerHTML = '';

        if (!Array.isArray(currentData) || currentData.length === 0) {
            buttonContainer.innerHTML = '<p class="col-span-full text-gray-500 text-center py-8">Кнопки недоступны. Для добавления кнопок перейдите в режим администратора.</p>';
            adminButtonContainer.innerHTML = '<p class="text-gray-500 text-center py-8">Кнопки недоступны. Добавьте свою первую кнопку выше.</p>';
            return;
        }

        // Render view mode buttons
        currentData.forEach(button => {
            const buttonEl = document.createElement('a');
            buttonEl.href = formatUrl(button.url);

            // Only open in new tab if it's an external URL
            if (button.url.startsWith('http')) {
                buttonEl.target = "_blank";
            }

            buttonEl.className = `custom-button ${button.color} text-white px-6 py-4 rounded-lg font-medium text-center shadow-md flex items-center justify-center`;
            buttonEl.textContent = button.name;
            buttonContainer.appendChild(buttonEl);
        });

        // Render admin mode buttons
        currentData.forEach(button => {
            const buttonRow = document.createElement('div');
            buttonRow.className = 'flex items-center bg-gray-50 p-3 rounded-lg border border-gray-200';
            buttonRow.dataset.id = button.id;

            buttonRow.innerHTML = `
                    <div class="drag-handle mr-3 text-gray-400">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="8" cy="8" r="1"></circle>
                            <circle cx="8" cy="16" r="1"></circle>
                            <circle cx="16" cy="8" r="1"></circle>Переключитесь в режим администратора
                            <circle cx="16" cy="16" r="1"></circle>
                        </svg>
                    </div>
                    <div class="flex-grow">
                        <div class="font-medium">${button.name}</div>
                        <div class="text-sm text-gray-500 truncate">${button.url}</div>
                    </div>
                    <div class="ml-4">
                        <button class="edit-button p-2 text-gray-600 hover:text-purple-600 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                        </button>
                    </div>
                `;

            const editButton = buttonRow.querySelector('.edit-button');
            editButton.addEventListener('click', () => openEditModal(button));

            // Add drag and drop functionality
            buttonRow.draggable = true;
            buttonRow.addEventListener('dragstart', handleDragStart);
            buttonRow.addEventListener('dragend', handleDragEnd);
            buttonRow.addEventListener('dragover', handleDragOver);
            buttonRow.addEventListener('dragenter', handleDragEnter);
            buttonRow.addEventListener('dragleave', handleDragLeave);
            buttonRow.addEventListener('drop', handleDrop);

            adminButtonContainer.appendChild(buttonRow);
        });
    }

    // Toggle between view and admin modes
    function toggleMode() {
        isAdminMode = !isAdminMode;

        if (isAdminMode) {
            viewMode.classList.add('hidden');
            adminMode.classList.remove('hidden');
            modeToggle.textContent = 'Режим просмотра';
            modeToggle.classList.remove('bg-white', 'text-purple-600');
            modeToggle.classList.add('bg-purple-200', 'text-purple-800');
        } else {
            viewMode.classList.remove('hidden');
            adminMode.classList.add('hidden');
            modeToggle.textContent = 'Админ-панель';
            modeToggle.classList.add('bg-white', 'text-purple-600');
            modeToggle.classList.remove('bg-purple-200', 'text-purple-800');
        }
    }

    // Toggle mode with button click
    modeToggle.addEventListener('click', toggleMode);

    // Toggle mode with keyboard shortcut (Shift+Ctrl+F)
    document.addEventListener('keydown', (e) => {
        if (e.shiftKey && e.ctrlKey && e.key.toLowerCase() === 'f') {
            e.preventDefault(); // Prevent browser's find function
            toggleMode();
            showNotification(`Switched to ${isAdminMode ? 'Admin' : 'View'} Mode`, 'bg-blue-500');
        }
    });

    // Add new button
    addButtonForm.addEventListener('submit', (e) => {
        e.preventDefault();

        const name = document.getElementById('button-name').value;
        const url = document.getElementById('button-url').value;
        const color = document.getElementById('button-color').value;

        const newButton = {
            id: Date.now(),
            name,
            url,
            color
        };

        // Ensure currentData is an array
        if (!Array.isArray(currentData)) {
            currentData = [];
        }

        currentData.push(newButton);
        saveData();
        renderButtons();

        // Reset form
        addButtonForm.reset();
        document.getElementById('button-name').focus();
    });

    // Open edit modal
    function openEditModal(button) {
        document.getElementById('edit-button-id').value = button.id;
        document.getElementById('edit-button-name').value = button.name;
        document.getElementById('edit-button-url').value = button.url;
        document.getElementById('edit-button-color').value = button.color;

        editModal.classList.remove('hidden');
    }

    // Close edit modal
    cancelEdit.addEventListener('click', () => {
        editModal.classList.add('hidden');
    });

    // Close modal when clicking outside
    editModal.addEventListener('click', (e) => {
        if (e.target === editModal) {
            editModal.classList.add('hidden');
        }
    });

    // Save edited button
    editButtonForm.addEventListener('submit', (e) => {
        e.preventDefault();

        const id = parseInt(document.getElementById('edit-button-id').value);
        const name = document.getElementById('edit-button-name').value;
        const url = document.getElementById('edit-button-url').value;
        const color = document.getElementById('edit-button-color').value;

        const index = currentData.findIndex(button => button.id === id);
        if (index !== -1) {
            currentData[index] = {id, name, url, color};
            saveData();
            renderButtons();
            editModal.classList.add('hidden');
        }
    });

    // Delete button
    deleteButton.addEventListener('click', () => {
        const id = parseInt(document.getElementById('edit-button-id').value);

        currentData = currentData.filter(button => button.id !== id);
        saveData();
        renderButtons();
        editModal.classList.add('hidden');
    });

    // Drag and drop functionality
    function handleDragStart(e) {
        draggedItem = this;
        setTimeout(() => this.classList.add('dragging'), 0);
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', this.innerHTML);
    }

    function handleDragEnd() {
        this.classList.remove('dragging');
        draggedItem = null;
    }

    function handleDragOver(e) {
        e.preventDefault();
        return false;
    }

    function handleDragEnter(e) {
        e.preventDefault();
        this.classList.add('bg-gray-100');
    }

    function handleDragLeave() {
        this.classList.remove('bg-gray-100');
    }

    function handleDrop(e) {
        e.stopPropagation();
        this.classList.remove('bg-gray-100');

        if (draggedItem !== this) {
            // Get the IDs of the dragged and target items
            const draggedId = parseInt(draggedItem.dataset.id);
            const targetId = parseInt(this.dataset.id);

            // Find their positions in the array
            const draggedIndex = currentData.findIndex(button => button.id === draggedId);
            const targetIndex = currentData.findIndex(button => button.id === targetId);

            // Reorder the array
            const [movedItem] = currentData.splice(draggedIndex, 1);
            currentData.splice(targetIndex, 0, movedItem);

            saveData();
            renderButtons();
        }

        return false;
    }

    // Show notification
    function showNotification(message, bgColor = 'bg-green-500') {
        const notificationEl = document.getElementById('notification');
        const messageEl = document.getElementById('notification-message');

        // Set message and color
        messageEl.textContent = message;

        // Replace the background color class
        notificationEl.className = notificationEl.className
            .replace(/bg-\w+-\d+/, bgColor);

        // Show notification
        notificationEl.classList.remove('translate-y-20', 'opacity-0');

        // Hide after 3 seconds
        setTimeout(() => {
            notificationEl.classList.add('translate-y-20', 'opacity-0');
        }, 3000);
    }

    // Initialize the app
    loadData();
</script>


</body>
</html>